#include <SPI.h>       
#include <DMD.h>    
#include <TimerOne.h>  
#include "SystemFont5x7.h"
#include "Arial_black_16.h" // Font untuk huruf tebal

#define DISPLAYS_ACROSS 1 
#define DISPLAYS_DOWN 1
DMD dmd(DISPLAYS_ACROSS, DISPLAYS_DOWN);

void ScanDMD() { 
  dmd.scanDisplayBySPI();
}

// FUNGSI KHUSUS RUNNING TEXT PER KALIMAT
void jalan(char *pesan, int speed) {
  dmd.clearScreen(true);
  // Mengganti font ke Arial_Black_16 agar teks terlihat tebal
  dmd.selectFont(Arial_Black_16);
  
  // Koordinat Y diset ke 0 karena font 16px memenuhi panel
  dmd.drawMarquee(pesan, strlen(pesan), 32, 0); 

  long timer = millis();
  boolean selesai = false;
  
  while (!selesai) {
    if ((millis() - timer) > speed) {
      selesai = dmd.stepMarquee(-1, 0); 
      timer = millis();
    }
  }
}

void setup(void) {
  Timer1.initialize(1000);          
  Timer1.attachInterrupt(ScanDMD);   
  dmd.clearScreen(true);   
}

void loop(void) {
  // ATURAN: jalan("TEKS", KECEPATAN);
  // Font tebal biasanya lebih enak dilihat dengan speed sedikit lebih lambat (misal: 30-40)
  
  jalan("TEMANKU SEMUA PADA JAHAT TANTE", 30);
  delay(200);
  
  jalan("AKU LAGI SUSAH MEREKA GAK ADA", 30);
  delay(200);
  
  jalan("COBA KALO LAGI JAYA", 30);
  delay(200);
  
  jalan("AKU DIPUJA PUJANYA TANTE", 30);
  delay(200);
  
  jalan("SUDAH TERBIASA TERJADI TANTE", 30);
  delay(200);
  
  jalan("TEMAN DATANG KETIKA LAGI BUTUH SAJA", 30);
  delay(200);
  
  jalan("COBA KALO LAGI SUSAH", 30);
  delay(200);
  
  jalan("MEREKA SEMUA MENGHILANG", 30);
  
  dmd.clearScreen(true);
  delay(2000); 
}